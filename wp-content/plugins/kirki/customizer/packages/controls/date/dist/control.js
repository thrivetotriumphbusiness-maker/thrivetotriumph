!function(){var t=function(t,e){if(this.input=t,this.options=e||{},this.currentDate=new Date,this.selectedDate=null,this.picker=null,this.isOpen=!1,this.input.value){var i=this.parseDate(this.input.value);i&&(this.selectedDate=i,this.currentDate=new Date(i))}this.init()};t.prototype={init:function(){var t=this;this.picker=document.createElement("div"),this.picker.className="kirki-datepicker-popup",this.picker.style.display="none",document.body.appendChild(this.picker),this.input.addEventListener("focus",function(e){t.show()}),this.input.addEventListener("click",function(e){t.show()}),this.input.addEventListener("change",function(e){var i=t.parseDate(e.target.value);i&&(t.selectedDate=i,t.currentDate=new Date(i))}),document.addEventListener("click",function(e){t.input.contains(e.target)||t.picker.contains(e.target)||t.hide()}),this.render()},parseDate:function(t){var e=t.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(e){var i=new Date(parseInt(e[1],10),parseInt(e[2],10)-1,parseInt(e[3],10));if(!isNaN(i.getTime()))return i}return null},formatDate:function(t){return t?t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0"):""},show:function(){this.isOpen||(this.isOpen=!0,this.render(),this.position(),this.picker.style.display="block",this.picker.style.width=this.input.clientWidth+"px")},hide:function(){this.isOpen&&(this.isOpen=!1,this.picker.style.display="none")},position:function(){var t=this.input.getBoundingClientRect(),e=window.pageYOffset||document.documentElement.scrollTop,i=window.pageXOffset||document.documentElement.scrollLeft,r=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth,a="none"!==this.picker.style.display;a||(this.picker.style.visibility="hidden",this.picker.style.display="block");var s=this.picker.offsetHeight,c=this.picker.offsetWidth;a||(this.picker.style.visibility="",this.picker.style.display="none");var o=r-t.bottom,d=t.top,p=!1;o<s+5&&d>o&&(p=!0),this.picker.style.position="absolute",this.picker.style.zIndex="500001",p?(this.picker.style.top=t.top+e-s-5+"px",this.picker.classList.add("kirki-datepicker-above"),this.picker.classList.remove("kirki-datepicker-below")):(this.picker.style.top=t.bottom+e+5+"px",this.picker.classList.add("kirki-datepicker-below"),this.picker.classList.remove("kirki-datepicker-above"));var l=t.left+i;l+c>n+i&&(l=n+i-c),l<i&&(l=i),this.picker.style.left=l+"px"},render:function(){var t=this,e=this.currentDate.getFullYear(),i=this.currentDate.getMonth(),r=new Date(e,i,1),n=new Date(e,i+1,0).getDate(),a=r.getDay(),s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],c='<div class="kirki-datepicker-header">';c+='<button type="button" class="kirki-datepicker-prev" aria-label="Previous month"></button>'+('<div class="kirki-datepicker-title">'+["January","February","March","April","May","June","July","August","September","October","November","December"][i]+" "+e)+'</div><button type="button" class="kirki-datepicker-next" aria-label="Next month"></button></div><table class="kirki-datepicker-calendar"><thead><tr>';for(var o=0;o<s.length;o++)c+="<th>"+s[o]+"</th>";c+="</tr></thead><tbody><tr>";for(var o=0;o<a;o++)c+="<td></td>";var d=new Date;d.setHours(0,0,0,0);for(var p=1;p<=n;p++){var l=new Date(e,i,p),h=l.getTime()===d.getTime(),u=this.selectedDate&&l.getTime()===new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth(),this.selectedDate.getDate()).getTime(),k="kirki-datepicker-day";h&&(k+=" kirki-datepicker-today"),u&&(k+=" kirki-datepicker-selected"),c+='<td class="'+(h?"kirki-datepicker-today":"")+'">'+('<a href="#" class="'+k+'" data-day="'+p+'" data-month="'+i+'" data-year="'+e+'">'+p)+"</a></td>",(a+p)%7==0&&p<n&&(c+="</tr><tr>")}c+="</tr></tbody></table>",this.picker.innerHTML=c;var v=this.picker.querySelector(".kirki-datepicker-prev"),y=this.picker.querySelector(".kirki-datepicker-next"),f=this.picker.querySelectorAll(".kirki-datepicker-day");v.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),t.currentDate.setMonth(t.currentDate.getMonth()-1);var i=t.isOpen;t.render(),i&&setTimeout(function(){t.picker.style.display="block",t.position()},0)}),y.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),t.currentDate.setMonth(t.currentDate.getMonth()+1);var i=t.isOpen;t.render(),i&&setTimeout(function(){t.picker.style.display="block",t.position()},0)});for(var o=0;o<f.length;o++)f[o].addEventListener("click",function(e){e.preventDefault();var i=parseInt(this.getAttribute("data-day"),10),r=parseInt(this.getAttribute("data-month"),10),n=new Date(parseInt(this.getAttribute("data-year"),10),r,i);t.selectedDate=n,t.input.value=t.formatDate(n),t.input.dispatchEvent(new Event("change",{bubbles:!0})),t.hide()})},destroy:function(){this.picker&&this.picker.parentNode&&this.picker.parentNode.removeChild(this.picker)}},wp.customize.controlConstructor["kirki-date"]=wp.customize.kirkiDynamicControl.extend({initKirkiControl:function(e){var i=(e=e||this).container[0]||e.container,r=i.querySelector("input.datepicker");if(r){var n=new t(r,{dateFormat:"yy-mm-dd"});e.datePicker=n;var a=function(t){t.target&&t.target.classList.contains("datepicker")&&e.setting.set(t.target.value)};i.addEventListener("change",a),i.addEventListener("keyup",a),i.addEventListener("paste",a)}}})}();