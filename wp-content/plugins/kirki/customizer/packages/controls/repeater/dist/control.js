!function(){function e(e){return e&&e[0]?e[0]:e}function t(t,i){var n=e(t);return n?n.querySelector(i):null}function i(t,i){var n=e(t);return n?Array.from(n.querySelectorAll(i)):[]}function n(t,i){var n=e(t);if(!n)return null;var r=i.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()});return n.dataset&&void 0!==n.dataset[r]&&""!==n.dataset[r]?n.dataset[r]:n.getAttribute("data-"+i)}function r(t,i,n){var r=e(t);if(r){var a=i.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()});r.dataset&&(r.dataset[a]=n),r.setAttribute("data-"+i,n)}}function a(t,i,n){var r=e(t);if(r){var a=new CustomEvent(i,{bubbles:!0,cancelable:!0,detail:n||[]});r.dispatchEvent(a)}}function s(t,i,n){var r=e(t);if(r){r.style.transition="max-height "+i+"ms ease-out, opacity "+i+"ms ease-out, padding "+i+"ms ease-out, margin "+i+"ms ease-out";var a=r.offsetHeight;r.style.maxHeight=a+"px",r.style.overflow="hidden",r.offsetHeight,r.style.maxHeight="0",r.style.opacity="0",r.style.paddingTop="0",r.style.paddingBottom="0",r.style.marginTop="0",r.style.marginBottom="0",setTimeout(function(){n&&n.call(r)},i)}}function o(t,i,n){var r=e(t);if(r){r.style.display="block",r.style.overflow="hidden",r.style.opacity="0";var a=r.scrollHeight;r.style.maxHeight="0",r.style.transition="max-height "+i+"ms ease-in, opacity "+i+"ms ease-in, padding "+i+"ms ease-in, margin "+i+"ms ease-in",r.offsetHeight,r.style.maxHeight=a+"px",r.style.opacity="1",setTimeout(function(){r.style.maxHeight="",r.style.overflow="",n&&n.call(r)},i)}}var l=function(e,t,i,o){var l=this;this.rowIndex=e,this.container=t,t&&t.nodeType?this.containerEl=t:t&&t[0]&&t[0].nodeType?this.containerEl=t[0]:this.containerEl=t,this.label=i,this.containerEl&&r(this.containerEl,"row",e),this.header=this.containerEl?this.containerEl.querySelector(".repeater-row-header"):null,this.headerEl=this.header,this.header&&(this.header.addEventListener("click",function(){l.toggleMinimize()}),this.header.addEventListener("mousedown",function(){a(l.containerEl,"row:start-dragging")})),this.containerEl&&(this.containerEl.addEventListener("click",function(e){e.target&&e.target.closest&&e.target.closest(".repeater-row-remove")&&l.remove()}),this.containerEl.addEventListener("keyup",function(e){if(e.target&&("INPUT"===e.target.tagName||"SELECT"===e.target.tagName||"TEXTAREA"===e.target.tagName)){var t=n(e.target,"field");t&&a(l.containerEl,"row:update",[l.rowIndex,t,e.target])}}),this.containerEl.addEventListener("change",function(e){if(e.target&&("INPUT"===e.target.tagName||"SELECT"===e.target.tagName||"TEXTAREA"===e.target.tagName)){var t=n(e.target,"field");t||(t=e.target.getAttribute("data-field")),t&&a(l.containerEl,"row:update",[l.rowIndex,t,e.target])}})),this.setRowIndex=function(e){this.rowIndex=e,this.containerEl&&r(this.containerEl,"row",e),this.updateLabel()},this.toggleMinimize=function(){if(this.containerEl&&(this.containerEl.classList.toggle("minimized"),this.header)){var e=this.header.querySelector(".dashicons");e&&(e.classList.toggle("dashicons-arrow-up"),e.classList.toggle("dashicons-arrow-down"))}},this.remove=function(){var e=this.rowIndex,t=this.containerEl;t&&a(t,"row:remove",[e]),s(this.containerEl,300,function(){t&&t.parentNode&&t.parentNode.removeChild(t)})},this.updateLabel=function(){var e,t,i,n;if("field"===this.label.type&&this.containerEl&&(e=this.containerEl.querySelector('.repeater-field [data-field="'+this.label.field+'"]'))&&""!==(t="SELECT"===e.tagName||"INPUT"===e.tagName||"TEXTAREA"===e.tagName?e.value:e.textContent||e.innerText||"")){!_.isUndefined(o.params.fields[this.label.field])&&!_.isUndefined(o.params.fields[this.label.field].type)&&("select"===o.params.fields[this.label.field].type?_.isUndefined(o.params.fields[this.label.field].choices)||_.isUndefined(o.params.fields[this.label.field].choices[t])||(t=o.params.fields[this.label.field].choices[t]):("radio"===o.params.fields[this.label.field].type||"radio-image"===o.params.fields[this.label.field].type)&&(i=o.selector+' [data-row="'+this.rowIndex+'"] .repeater-field [data-field="'+this.label.field+'"]:checked',(n=document.querySelector(i))&&(t=n.value))),this.header&&(n=this.header.querySelector(".repeater-row-label"))&&(n.textContent=t);return}this.header&&(n=this.header.querySelector(".repeater-row-label"))&&(n.textContent=this.label.value+" "+(this.rowIndex+1))},this.updateLabel()};wp.customize.controlConstructor.repeater=wp.customize.Control.extend({ready:function(){!_.isUndefined(window.kirkiControlLoader)&&_.isFunction(kirkiControlLoader)?kirkiControlLoader(this):this.initKirkiControl()},initKirkiControl:function(i){var a,s,o,l=e((i=i||this).container);o=i.params.value;var l=e(i.container);if(l)i.settingField=l.querySelector("[data-customize-setting-link]");else if(i.container&&i.container.find&&"function"==typeof i.container.find){var d=i.container.find("[data-customize-setting-link]").first();i.settingField=d&&d[0]?d[0]:null}else i.settingField=t(i.container,"[data-customize-setting-link]");i.setValue([],!1);var l=e(i.container);if(l)i.repeaterFieldsContainer=l.querySelector(".repeater-fields");else if(i.container&&i.container.find&&"function"==typeof i.container.find){var c=i.container.find(".repeater-fields").first();i.repeaterFieldsContainer=c&&c[0]?c[0]:null}else i.repeaterFieldsContainer=t(i.container,".repeater-fields");i.repeaterFieldsContainerEl=i.repeaterFieldsContainer,i.currentIndex=0,i.rows=[],a=!1,_.isUndefined(i.params.choices.limit)||(a=!(0>=i.params.choices.limit)&&parseInt(i.params.choices.limit,10)),l&&(l.addEventListener("click",function(e){if(e.target.closest("button.repeater-add"))if(e.preventDefault(),!a||i.currentIndex<a)(s=i.addRow())&&s.containerEl&&s.containerEl.classList.contains("minimized")&&s.toggleMinimize(),i.initColorPicker(),i.initSelect(s);else{var t=document.querySelector(i.selector+" .limit");t&&t.classList.add("highlight")}}),l.addEventListener("click",function(e){if(e.target&&e.target.closest&&e.target.closest(".repeater-row-remove")&&(i.currentIndex--,!a||i.currentIndex<a)){var t=document.querySelector(i.selector+" .limit");t&&t.classList.remove("highlight")}}),l.addEventListener("click",function(e){var t=e.target.closest(".repeater-field-image .upload-button, .repeater-field-cropped_image .upload-button, .repeater-field-upload .upload-button");t&&(e.preventDefault(),i.thisButton=t,i.openFrame(e))}),l.addEventListener("keypress",function(e){var t=e.target.closest(".repeater-field-image .upload-button, .repeater-field-cropped_image .upload-button, .repeater-field-upload .upload-button");t&&("Enter"===e.key||13===e.keyCode)&&(e.preventDefault(),i.thisButton=t,i.openFrame(e))}),l.addEventListener("click",function(e){var t=e.target.closest(".repeater-field-image .remove-button, .repeater-field-cropped_image .remove-button");t&&(e.preventDefault(),i.thisButton=t,i.removeImage(e))}),l.addEventListener("keypress",function(e){var t=e.target.closest(".repeater-field-image .remove-button, .repeater-field-cropped_image .remove-button");t&&("Enter"===e.key||13===e.keyCode)&&(e.preventDefault(),i.thisButton=t,i.removeImage(e))}),l.addEventListener("click",function(e){var t=e.target.closest(".repeater-field-upload .remove-button");t&&(e.preventDefault(),i.thisButton=t,i.removeFile(e))}),l.addEventListener("keypress",function(e){var t=e.target.closest(".repeater-field-upload .remove-button");t&&("Enter"===e.key||13===e.keyCode)&&(e.preventDefault(),i.thisButton=t,i.removeFile(e))})),i.repeaterTemplate=_.memoize(function(){var t={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(n){var r=e(i.container),a=r?r.querySelector(".customize-control-repeater-content"):null;if(!a&&i.container&&i.container.find&&"function"==typeof i.container.find){var s=i.container.find(".customize-control-repeater-content").first();a=s&&s[0]?s[0]:null}a||(a=document.querySelector(".customize-control-repeater-content"));var o=a?a.innerHTML:"";return o?_.template(o,null,t)(n):(console.warn("Repeater template not found"),"")}}),o&&Array.isArray(o)&&o.length&&(_.each(o,function(e,t){var a=i.currentIndex;i.currentIndex=t,(s=i.addRow(e))&&(s.setRowIndex(t),n(s.containerEl,"row")!==String(t)&&r(s.containerEl,"row",t),s.updateLabel(),i.initColorPicker(),i.initSelect(s,e)),i.currentIndex=a}),i.currentIndex=o.length),i.repeaterFieldsContainer&&setTimeout(function(){i.initSortable()},100)},initSortable:function(){var e,n,r=this,a=this.repeaterFieldsContainer;if(a&&!r._sortableInitialized){r._sortableInitialized=!0;var s=null,o=null,l=0,d=!1;i(a,".repeater-row").forEach(u);var c=new MutationObserver(function(e){e.forEach(function(e){e.addedNodes.forEach(function(e){1===e.nodeType&&e.classList&&e.classList.contains("repeater-row")&&u(e)})})});c.observe(a,{childList:!0}),r._sortableObserver=c}function u(i){var c=t(i,".repeater-row-header");c&&(c.style.cursor="move",c.addEventListener("mousedown",function(t){0===t.button&&(l=t.clientY,i.offsetTop,d=!1,s=i,e=function(e){if(s){var t=Math.abs(e.clientY-l);if(!d&&t>5){d=!0,c.style.pointerEvents="none",(o=document.createElement("div")).className="repeater-row-placeholder",o.style.height=i.offsetHeight+"px",o.style.border="2px dashed #ccc",o.style.margin="0.5rem 0",o.style.background="#f0f0f0",o.style.minHeight=i.offsetHeight+"px",i.parentNode.insertBefore(o,i),i.style.opacity="0.5",i.style.cursor="grabbing",i.style.position="fixed",i.style.zIndex="10000",i.style.width=i.offsetWidth+"px",i.style.pointerEvents="none";var n=s.parentNode;s._originalParent=n,s._originalNextSibling=s.nextSibling,n&&n!==document.body&&(n.removeChild(s),document.body.appendChild(s))}if(d&&o){var r=a.getBoundingClientRect().left;i.style.top=e.clientY-10+"px",i.style.left=r+"px";var u=Array.from(a.querySelectorAll(".repeater-row")),p=-1;o.parentNode.removeChild(o);for(var h=0;h<u.length;h++){var f=u[h].getBoundingClientRect();if(e.clientY<f.top+f.height/2){p=h;break}}p>=0&&p<u.length?a.insertBefore(o,u[p]):(u.length,a.appendChild(o))}}},n=function(t){if(!s){document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n);return}if(s.style.opacity="",s.style.cursor="",s.style.position="",s.style.zIndex="",s.style.width="",s.style.top="",s.style.left="",s.style.pointerEvents="",c.style.pointerEvents="",d)try{o&&o.parentNode?(o.parentNode.insertBefore(s,o),o.parentNode.removeChild(o)):s._originalParent?s._originalNextSibling&&s._originalNextSibling.parentNode?s._originalParent.insertBefore(s,s._originalNextSibling):s._originalParent.appendChild(s):a.appendChild(s),delete s._originalParent,delete s._originalNextSibling,setTimeout(function(){r.sort()},0)}catch(e){if(s.parentNode!==document.body&&s.parentNode||a.appendChild(s),o&&o.parentNode)try{o.parentNode.removeChild(o)}catch(e){}delete s._originalParent,delete s._originalNextSibling}else if(!d){if(s.parentNode===document.body)if(s._originalParent&&s._originalNextSibling)try{s._originalParent.insertBefore(s,s._originalNextSibling)}catch(e){a.appendChild(s)}else a.appendChild(s);delete s._originalParent,delete s._originalNextSibling}s=null,o=null,d=!1,document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n)},document.addEventListener("mousemove",e),document.addEventListener("mouseup",n))}))}},openFrame:function(e){if(!wp.customize.utils.isKeydownButNotEnterEvent(e)){var t=this.thisButton?this.thisButton.closest(".repeater-field"):null;t&&t.classList.contains("repeater-field-cropped_image")?this.initCropperFrame():this.initFrame(),this.frame.open()}},initFrame:function(){var e=this.getMimeType();this.frame=wp.media({states:[new wp.media.controller.Library({library:wp.media.query({type:e}),multiple:!1,date:!1})]}),this.frame.on("select",this.onSelect,this)},initCropperFrame:function(){var e=this.thisButton?this.thisButton.parentElement.querySelector("input.hidden-field"):null,t=e?n(e,"field"):null,i=this.getMimeType();_.isString(t)&&""!==t&&_.isObject(this.params.fields[t])&&"cropped_image"===this.params.fields[t].type&&["width","height","flex_width","flex_height"].forEach((function(e){_.isUndefined(this.params.fields[t][e])||(this.params[e]=this.params.fields[t][e])}).bind(this)),this.frame=wp.media({button:{text:"Select and Crop",close:!1},states:[new wp.media.controller.Library({library:wp.media.query({type:i}),multiple:!1,date:!1,suggestedWidth:this.params.width,suggestedHeight:this.params.height}),new wp.media.controller.CustomizeImageCropper({imgSelectOptions:this.calculateImageSelectOptions,control:this})]}),this.frame.on("select",this.onSelectForCrop,this),this.frame.on("cropped",this.onCropped,this),this.frame.on("skippedcrop",this.onSkippedCrop,this)},onSelect:function(){var e=this.frame.state().get("selection").first().toJSON(),t=this.thisButton?this.thisButton.closest(".repeater-field"):null;t&&t.classList.contains("repeater-field-upload")?this.setFileInRepeaterField(e):this.setImageInRepeaterField(e)},onSelectForCrop:function(){var e=this.frame.state().get("selection").first().toJSON();this.params.width!==e.width||this.params.height!==e.height||this.params.flex_width||this.params.flex_height?this.frame.setState("cropper"):this.setImageInRepeaterField(e)},onCropped:function(e){this.setImageInRepeaterField(e)},calculateImageSelectOptions:function(e,t){var i,n,r,a=t.get("control"),s=!!parseInt(a.params.flex_width,10),o=!!parseInt(a.params.flex_height,10),l=e.get("width"),d=e.get("height"),c=parseInt(a.params.width,10),u=parseInt(a.params.height,10),p=c/u;return t.set("canSkipCrop",!a.mustBeCropped(s,o,c,u,l,d)),l/d>p?c=(u=d)*p:u=(c=l)/p,i=(l-c)/2,n=(d-u)/2,r={handles:!0,keys:!0,instance:!0,persistent:!0,imageWidth:l,imageHeight:d,x1:i,y1:n,x2:c+i,y2:u+n},!1===o&&!1===s&&(r.aspectRatio=c+":"+u),!1===o&&(r.maxHeight=u),!1===s&&(r.maxWidth=c),r},mustBeCropped:function(e,t,i,n,r,a){return!(!0===e&&!0===t||!0===e&&n===a||!0===t&&i===r||i===r&&n===a||r<=i)},onSkippedCrop:function(){var e=this.frame.state().get("selection").first().toJSON();this.setImageInRepeaterField(e)},setImageInRepeaterField:function(e){var r=this.thisButton?this.thisButton.closest(".repeater-field-image, .repeater-field-cropped_image"):null;if(r){var a=t(r,".kirki-image-attachment");a&&(a.innerHTML='<img src="'+e.url+'">',a.style.display="none",o(a,400));var s=t(r,".hidden-field");s&&(s.value=e.id);var l=n(this.thisButton,"alt-label");l&&this.thisButton&&(this.thisButton.textContent=l);var d=t(r,".remove-button");d&&(d.style.display=""),i(r,"input, textarea, select").forEach(function(e){e.dispatchEvent(new Event("change",{bubbles:!0}))}),this.frame.close()}},setFileInRepeaterField:function(e){var r=this.thisButton?this.thisButton.closest(".repeater-field-upload"):null;if(r){var a=t(r,".kirki-file-attachment");a&&(a.innerHTML='<span class="file"><span class="dashicons dashicons-media-default"></span> '+e.filename+"</span>",a.style.display="none",o(a,400));var s=t(r,".hidden-field");s&&(s.value=e.id);var l=n(this.thisButton,"alt-label");l&&this.thisButton&&(this.thisButton.textContent=l);var d=t(r,".upload-button");d&&(d.style.display="");var c=t(r,".remove-button");c&&(c.style.display=""),i(r,"input, textarea, select").forEach(function(e){e.dispatchEvent(new Event("change",{bubbles:!0}))}),this.frame.close()}},getMimeType:function(){var e=this.thisButton?this.thisButton.parentElement.querySelector("input.hidden-field"):null,t=e?n(e,"field"):null;return _.isString(t)&&""!==t&&_.isObject(this.params.fields[t])&&"upload"===this.params.fields[t].type&&!_.isUndefined(this.params.fields[t].mime_type)?this.params.fields[t].mime_type:"image"},removeImage:function(e){if(!wp.customize.utils.isKeydownButNotEnterEvent(e)){var r=this.thisButton?this.thisButton.closest(".repeater-field-image, .repeater-field-cropped_image, .repeater-field-upload"):null;if(r){var a=t(r,".upload-button"),o=t(r,".kirki-image-attachment"),l=o?n(o,"placeholder"):"";o&&s(o,200,function(){this.style.display="",this.innerHTML=l||""});var d=t(r,".hidden-field");d&&(d.value="");var c=a?n(a,"label"):"";c&&a&&(a.textContent=c),this.thisButton&&(this.thisButton.style.display="none"),i(r,"input, textarea, select").forEach(function(e){e.dispatchEvent(new Event("change",{bubbles:!0}))})}}},removeFile:function(e){if(!wp.customize.utils.isKeydownButNotEnterEvent(e)){var r=this.thisButton?this.thisButton.closest(".repeater-field-upload"):null;if(r){var a=t(r,".upload-button"),o=t(r,".kirki-file-attachment"),l=o?n(o,"placeholder"):"";o&&s(o,200,function(){this.style.display="",this.innerHTML=l||""});var d=t(r,".hidden-field");d&&(d.value="");var c=a?n(a,"label"):"";c&&a&&(a.textContent=c),this.thisButton&&(this.thisButton.style.display="none"),i(r,"input, textarea, select").forEach(function(e){e.dispatchEvent(new Event("change",{bubbles:!0}))})}}},getValue:function(){return JSON.parse(decodeURI(this.setting.get()))},setValue:function(e,t,i){var n=[];i&&(Object.keys(this.params.fields).forEach((function(e){var t=this.params.fields[e];("image"===t.type||"cropped_image"===t.type||"upload"===t.type)&&n.push(e)}).bind(this)),e.forEach(function(t,i){n.forEach(function(n){_.isUndefined(t[n])||_.isUndefined(t[n].id)||(e[i][n]=t[n].id)})})),this.setting.set(encodeURI(JSON.stringify(e))),t&&("u">typeof KirkiRepeaterDependencies&&KirkiRepeaterDependencies&&"function"==typeof KirkiRepeaterDependencies.init&&KirkiRepeaterDependencies.init(),this.settingField&&this.settingField.dispatchEvent(new Event("change",{bubbles:!0})))},addRow:function(e){var t,i,a,s=this,o=s.repeaterTemplate(),d=this.getValue(),c={};if(o){if(Array.isArray(d)||(d=[]),this.currentIndex!==d.length&&(this.currentIndex=d.length),t=JSON.parse(JSON.stringify(s.params.fields)),e)for(a in e)e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&(t[a].default=e[a]);t.index=this.currentIndex;var u=o(t);if(!u||"string"!=typeof u)return void console.warn("Repeater template returned invalid HTML");var p=document.createElement("div");p.innerHTML=u.trim();var h=p.firstElementChild||p.firstChild;if(h&&1===h.nodeType||(h=p.querySelector("li.repeater-row")),!h)return void console.warn("Repeater template did not produce a valid row element");if(s.repeaterFieldsContainer){if(s.repeaterFieldsContainer.appendChild(h),i=new l(s.currentIndex,h,s.params.row_label,s),n(h,"row")!==String(s.currentIndex)&&r(h,"row",s.currentIndex),i.containerEl&&i.containerEl.classList.contains("minimized")&&(i.containerEl.classList.remove("minimized"),i.header)){var f=i.header.querySelector(".dashicons");f&&(f.classList.remove("dashicons-arrow-down"),f.classList.add("dashicons-arrow-up"))}i.updateLabel(),i.containerEl&&(i._removeHandler=function(e){var t=e.detail&&void 0!==e.detail[0]?e.detail[0]:i.rowIndex;s.deleteRow(t)},i._updateHandler=function(e){var t=e.detail||[];t[0];var n=t[1],r=t[2];s.updateField.call(s,e,i.rowIndex,n,r),i.updateLabel()},i.containerEl.addEventListener("row:remove",i._removeHandler),i.containerEl.addEventListener("row:update",i._updateHandler))}for(a in this.rows[this.currentIndex]=i,t)t.hasOwnProperty(a)&&"index"!==a&&(c[a]=t[a].default);return Array.isArray(d)||(d=[]),this.currentIndex!==d.length&&(this.currentIndex=d.length),d[this.currentIndex]=c,this.setValue(d,!0),this.currentIndex++,i}},sort:function(){var e=this,t=i(this.repeaterFieldsContainer,".repeater-row"),a=[],s=e.getValue(),o=[],l=[];t.length!==e.rows.length||t.length!==s.length||(t.forEach(function(e,t){var i=n(e,"row");i||0===i||(i=e.getAttribute("data-row")),null!=i&&""!==i&&(isNaN(i=parseInt(i,10))||a.push(i))}),a.length===t.length&&(a.forEach(function(t,i){e.rows[t]&&(o[i]=e.rows[t],o[i].setRowIndex(i),o[i].containerEl&&r(o[i].containerEl,"row",i),o[i].updateLabel()),s[t]&&(l[i]=s[t])}),e.rows=o,e.setValue(l,!0),e.currentIndex=l.length))},deleteRow:function(e){var t=this.getValue(),a=[],s=[],o=0;if(void 0!==t[e]){if(this.rows[e]){for(var l=0;l<t.length;l++)l!==e&&(a[o]=t[l],s[o]=this.rows[l],s[o]&&(s[o].setRowIndex(o),s[o].containerEl&&(r(s[o].containerEl,"row",o),s[o].updateLabel())),o++);this.rows=s,this.setValue(a,!0),this.currentIndex=a.length;for(var d=0;d<s.length;d++)s[d]&&s[d].updateLabel()}}else{var c=i(this.repeaterFieldsContainer,".repeater-row"),u=[],p=[];c.forEach((function(e,i){var a=parseInt(n(e,"row"),10);!isNaN(a)&&this.rows[a]&&(u[i]=this.rows[a],u[i].setRowIndex(i),r(e,"row",i),p[i]=t[a]||{})}).bind(this)),this.rows=u,this.currentIndex=u.length;for(var h=0;h<u.length;h++)u[h]&&u[h].updateLabel();p.length>0&&this.setValue(p,!0)}},updateField:function(t,i,n,r){if(!(null==i||isNaN(i))){if((i=parseInt(i,10),this.rows[i])&&this.params.fields[n]){a=this.params.fields[n].type,this.rows[i],Array.isArray(s=this.getValue())||(s=[]);var a,s,o=e(r);o||(o="string"==typeof r?document.querySelector(r):r),s[i]||(s[i]={}),_.isUndefined(s[i][n])&&(s[i][n]=""),"checkbox"===a?s[i][n]=o.checked:s[i][n]=o.value,this.setValue(s,!0)}}},initColorPicker:function(){var e=this;i(e.container,".kirki-classic-color-picker").forEach(function(t){if(!t.closest(".wp-picker-container")){var i=jQuery(t),r=n(t,"field"),a={};!_.isUndefined(r)&&!_.isUndefined(e.params.fields[r])&&!_.isUndefined(e.params.fields[r].palettes)&&_.isObject(e.params.fields[r].palettes)&&(a.palettes=e.params.fields[r].palettes),a.change=function(t,i){var r=t.target,a=r.closest(".repeater-row"),s=a?parseInt(n(a,"row"),10):null,o=e.getValue(),l=i.color._alpha<1?i.color.to_s():i.color.toString();if(null!==s&&!_.isUndefined(o[s])){var d=n(r,"field");o[s][d]=l,e.setValue(o,!0)}setTimeout(function(){t.target.value=l},50)},i.wpColorPicker(a)}})},initSelect:function(e,t){var r=this,a=i(e.containerEl||e.container,".repeater-field select");a&&0!==a.length&&(t=t||{},a.forEach(function(i){var a=n(i,"field");a||(a=i.getAttribute("data-field")),n(i,"multiple"),a&&void 0!==t[a]&&null!==t[a]&&""!==t[a]&&(i.value=t[a]),a&&i.addEventListener("change",function(t){t.stopPropagation();var i=r.getValue(),n=e.rowIndex;i[n]&&(i[n][a]=t.target.value,r.setValue(i,!0),e.updateLabel&&e.updateLabel())})}))}})}();