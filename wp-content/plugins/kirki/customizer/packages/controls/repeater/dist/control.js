!function(){function e(e){return e&&e[0]?e[0]:e}function t(t,i){var r=e(t);return r?r.querySelector(i):null}function i(t,i){var r=e(t);return r?Array.from(r.querySelectorAll(i)):[]}function r(t,i){var r=e(t);if(!r)return null;var n=i.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()});return r.dataset&&void 0!==r.dataset[n]?r.dataset[n]:r.getAttribute("data-"+i)}function n(t,i,r){var n=e(t);if(n){var a=i.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()});n.dataset&&(n.dataset[a]=r),n.setAttribute("data-"+i,r)}}function a(t,i,r){var n=e(t);if(n){var a=new CustomEvent(i,{bubbles:!0,cancelable:!0,detail:r||[]});n.dispatchEvent(a)}}function s(t,i,r){var n=e(t);if(n){n.style.transition="max-height "+i+"ms ease-out, opacity "+i+"ms ease-out, padding "+i+"ms ease-out, margin "+i+"ms ease-out";var a=n.offsetHeight;n.style.maxHeight=a+"px",n.style.overflow="hidden",n.offsetHeight,n.style.maxHeight="0",n.style.opacity="0",n.style.paddingTop="0",n.style.paddingBottom="0",n.style.marginTop="0",n.style.marginBottom="0",setTimeout(function(){r&&r.call(n)},i)}}function o(t,i,r){var n=e(t);if(n){n.style.display="block",n.style.overflow="hidden",n.style.opacity="0";var a=n.scrollHeight;n.style.maxHeight="0",n.style.transition="max-height "+i+"ms ease-in, opacity "+i+"ms ease-in, padding "+i+"ms ease-in, margin "+i+"ms ease-in",n.offsetHeight,n.style.maxHeight=a+"px",n.style.opacity="1",setTimeout(function(){n.style.maxHeight="",n.style.overflow="",r&&r.call(n)},i)}}var l=function(e,t,i,o){var l=this;this.rowIndex=e,this.container=t,t&&t.nodeType?this.containerEl=t:t&&t[0]&&t[0].nodeType?this.containerEl=t[0]:this.containerEl=t,this.label=i,this.containerEl&&n(this.containerEl,"row",e),this.header=this.containerEl?this.containerEl.querySelector(".repeater-row-header"):null,this.headerEl=this.header,this.header&&(this.header.addEventListener("click",function(){l.toggleMinimize()}),this.header.addEventListener("mousedown",function(){a(l.containerEl,"row:start-dragging")})),this.containerEl&&(this.containerEl.addEventListener("click",function(e){e.target&&e.target.closest&&e.target.closest(".repeater-row-remove")&&l.remove()}),this.containerEl.addEventListener("keyup",function(e){e.target&&("INPUT"===e.target.tagName||"SELECT"===e.target.tagName||"TEXTAREA"===e.target.tagName)&&a(l.containerEl,"row:update",[l.rowIndex,r(e.target,"field"),e.target])}),this.containerEl.addEventListener("change",function(e){e.target&&("INPUT"===e.target.tagName||"SELECT"===e.target.tagName||"TEXTAREA"===e.target.tagName)&&a(l.containerEl,"row:update",[l.rowIndex,r(e.target,"field"),e.target])})),this.setRowIndex=function(e){this.rowIndex=e,this.containerEl&&n(this.containerEl,"row",e),this.updateLabel()},this.toggleMinimize=function(){if(this.containerEl&&(this.containerEl.classList.toggle("minimized"),this.header)){var e=this.header.querySelector(".dashicons");e&&(e.classList.toggle("dashicons-arrow-up"),e.classList.toggle("dashicons-arrow-down"))}},this.remove=function(){var e=this.rowIndex,t=this.containerEl;t&&a(t,"row:remove",[e]),s(this.containerEl,300,function(){t&&t.parentNode&&t.parentNode.removeChild(t)})},this.updateLabel=function(){var e,t,i,r;if("field"===this.label.type&&this.containerEl&&(e=this.containerEl.querySelector('.repeater-field [data-field="'+this.label.field+'"]'))&&""!==(t="SELECT"===e.tagName||"INPUT"===e.tagName||"TEXTAREA"===e.tagName?e.value:e.textContent||e.innerText||"")){!_.isUndefined(o.params.fields[this.label.field])&&!_.isUndefined(o.params.fields[this.label.field].type)&&("select"===o.params.fields[this.label.field].type?_.isUndefined(o.params.fields[this.label.field].choices)||_.isUndefined(o.params.fields[this.label.field].choices[t])||(t=o.params.fields[this.label.field].choices[t]):("radio"===o.params.fields[this.label.field].type||"radio-image"===o.params.fields[this.label.field].type)&&(i=o.selector+' [data-row="'+this.rowIndex+'"] .repeater-field [data-field="'+this.label.field+'"]:checked',(r=document.querySelector(i))&&(t=r.value))),this.header&&(r=this.header.querySelector(".repeater-row-label"))&&(r.textContent=t);return}this.header&&(r=this.header.querySelector(".repeater-row-label"))&&(r.textContent=this.label.value+" "+(this.rowIndex+1))},this.updateLabel()};wp.customize.controlConstructor.repeater=wp.customize.Control.extend({ready:function(){!_.isUndefined(window.kirkiControlLoader)&&_.isFunction(kirkiControlLoader)?kirkiControlLoader(this):this.initKirkiControl()},initKirkiControl:function(i){var a,s,o,l=e((i=i||this).container);o=i.params.value;var l=e(i.container);if(l)i.settingField=l.querySelector("[data-customize-setting-link]");else if(i.container&&i.container.find&&"function"==typeof i.container.find){var d=i.container.find("[data-customize-setting-link]").first();i.settingField=d&&d[0]?d[0]:null}else i.settingField=t(i.container,"[data-customize-setting-link]");i.setValue([],!1);var l=e(i.container);if(l)i.repeaterFieldsContainer=l.querySelector(".repeater-fields");else if(i.container&&i.container.find&&"function"==typeof i.container.find){var c=i.container.find(".repeater-fields").first();i.repeaterFieldsContainer=c&&c[0]?c[0]:null}else i.repeaterFieldsContainer=t(i.container,".repeater-fields");i.repeaterFieldsContainerEl=i.repeaterFieldsContainer,i.currentIndex=0,i.rows=[],a=!1,_.isUndefined(i.params.choices.limit)||(a=!(0>=i.params.choices.limit)&&parseInt(i.params.choices.limit,10)),l&&(l.addEventListener("click",function(e){if(e.target.closest("button.repeater-add"))if(e.preventDefault(),!a||i.currentIndex<a)(s=i.addRow())&&s.containerEl&&s.containerEl.classList.contains("minimized")&&s.toggleMinimize(),i.initColorPicker(),i.initSelect(s);else{var t=document.querySelector(i.selector+" .limit");t&&t.classList.add("highlight")}}),l.addEventListener("click",function(e){if(e.target&&e.target.closest&&e.target.closest(".repeater-row-remove")&&(i.currentIndex--,!a||i.currentIndex<a)){var t=document.querySelector(i.selector+" .limit");t&&t.classList.remove("highlight")}}),l.addEventListener("click",function(e){var t=e.target.closest(".repeater-field-image .upload-button, .repeater-field-cropped_image .upload-button, .repeater-field-upload .upload-button");t&&(e.preventDefault(),i.thisButton=t,i.openFrame(e))}),l.addEventListener("keypress",function(e){var t=e.target.closest(".repeater-field-image .upload-button, .repeater-field-cropped_image .upload-button, .repeater-field-upload .upload-button");t&&("Enter"===e.key||13===e.keyCode)&&(e.preventDefault(),i.thisButton=t,i.openFrame(e))}),l.addEventListener("click",function(e){var t=e.target.closest(".repeater-field-image .remove-button, .repeater-field-cropped_image .remove-button");t&&(e.preventDefault(),i.thisButton=t,i.removeImage(e))}),l.addEventListener("keypress",function(e){var t=e.target.closest(".repeater-field-image .remove-button, .repeater-field-cropped_image .remove-button");t&&("Enter"===e.key||13===e.keyCode)&&(e.preventDefault(),i.thisButton=t,i.removeImage(e))}),l.addEventListener("click",function(e){var t=e.target.closest(".repeater-field-upload .remove-button");t&&(e.preventDefault(),i.thisButton=t,i.removeFile(e))}),l.addEventListener("keypress",function(e){var t=e.target.closest(".repeater-field-upload .remove-button");t&&("Enter"===e.key||13===e.keyCode)&&(e.preventDefault(),i.thisButton=t,i.removeFile(e))})),i.repeaterTemplate=_.memoize(function(){var t={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(r){var n=e(i.container),a=n?n.querySelector(".customize-control-repeater-content"):null;if(!a&&i.container&&i.container.find&&"function"==typeof i.container.find){var s=i.container.find(".customize-control-repeater-content").first();a=s&&s[0]?s[0]:null}a||(a=document.querySelector(".customize-control-repeater-content"));var o=a?a.innerHTML:"";return o?_.template(o,null,t)(r):(console.warn("Repeater template not found"),"")}}),o&&Array.isArray(o)&&o.length&&(_.each(o,function(e,t){var a=i.currentIndex;i.currentIndex=t,(s=i.addRow(e))&&(s.setRowIndex(t),r(s.containerEl,"row")!==String(t)&&n(s.containerEl,"row",t),s.updateLabel(),i.initColorPicker(),i.initSelect(s,e)),i.currentIndex=a}),i.currentIndex=o.length),i.repeaterFieldsContainer&&setTimeout(function(){i.initSortable()},100)},initSortable:function(){var e=this,r=this.repeaterFieldsContainer;if(r&&!e._sortableInitialized){e._sortableInitialized=!0;var n=null,a=null;r.addEventListener("dragover",function(e){return e.preventDefault&&e.preventDefault(),e.dataTransfer.dropEffect="move",!1}),r.addEventListener("drop",function(t){return t.stopPropagation&&t.stopPropagation(),n&&a&&a.parentNode&&(n.parentNode===r&&r.removeChild(n),a.parentNode.insertBefore(n,a),a.parentNode.removeChild(a),e.sort()),!1}),i(r,".repeater-row").forEach(l);var s=new MutationObserver(function(e){e.forEach(function(e){e.addedNodes.forEach(function(e){1===e.nodeType&&e.classList&&e.classList.contains("repeater-row")&&l(e)})})});s.observe(r,{childList:!0}),e._sortableObserver=s}function o(){r.querySelectorAll(".repeater-row").forEach(function(e){e.classList.remove("drag-over")})}function l(i){var s=t(i,".repeater-row-header");s&&(i.draggable=!0,s.style.cursor="move",i.addEventListener("dragstart",function(e){n=i,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",i.innerHTML),i.classList.add("dragging")}),i.addEventListener("dragend",function(){i.classList.remove("dragging"),a&&a.parentNode&&a.parentNode.removeChild(a),o(),n&&e.sort(),n=null,a=null}),i.addEventListener("dragover",function(e){if(e.preventDefault&&e.preventDefault(),e.dataTransfer.dropEffect="move",n&&n!==i){o(),i.classList.add("drag-over");var t=i.getBoundingClientRect(),s=t.top+t.height/2;a&&a.parentNode&&a.parentNode.removeChild(a),(a=document.createElement("li")).className="repeater-row-placeholder",a.setAttribute("aria-hidden","true"),a.style.height=n.offsetHeight+"px",a.style.border="2px dashed #ccc",a.style.background="#f0f0f0",a.style.margin="0",a.style.padding="0",a.style.listStyle="none",e.clientY<s?r.insertBefore(a,i):i.nextSibling?r.insertBefore(a,i.nextSibling):r.appendChild(a)}return!1}),i.addEventListener("dragenter",function(e){n&&n!==i&&i.classList.add("drag-over")}),i.addEventListener("dragleave",function(e){i.contains(e.relatedTarget)||i.classList.remove("drag-over")}),i.addEventListener("drop",function(e){return e.stopPropagation&&e.stopPropagation(),n&&n!==i&&a&&a.parentNode&&(n.parentNode===r&&r.removeChild(n),a.parentNode.insertBefore(n,a),a.parentNode.removeChild(a)),i.classList.remove("drag-over"),!1}))}},openFrame:function(e){if(!wp.customize.utils.isKeydownButNotEnterEvent(e)){var t=this.thisButton?this.thisButton.closest(".repeater-field"):null;t&&t.classList.contains("repeater-field-cropped_image")?this.initCropperFrame():this.initFrame(),this.frame.open()}},initFrame:function(){var e=this.getMimeType();this.frame=wp.media({states:[new wp.media.controller.Library({library:wp.media.query({type:e}),multiple:!1,date:!1})]}),this.frame.on("select",this.onSelect,this)},initCropperFrame:function(){var e=this.thisButton?this.thisButton.parentElement.querySelector("input.hidden-field"):null,t=e?r(e,"field"):null,i=this.getMimeType();_.isString(t)&&""!==t&&_.isObject(this.params.fields[t])&&"cropped_image"===this.params.fields[t].type&&["width","height","flex_width","flex_height"].forEach((function(e){_.isUndefined(this.params.fields[t][e])||(this.params[e]=this.params.fields[t][e])}).bind(this)),this.frame=wp.media({button:{text:"Select and Crop",close:!1},states:[new wp.media.controller.Library({library:wp.media.query({type:i}),multiple:!1,date:!1,suggestedWidth:this.params.width,suggestedHeight:this.params.height}),new wp.media.controller.CustomizeImageCropper({imgSelectOptions:this.calculateImageSelectOptions,control:this})]}),this.frame.on("select",this.onSelectForCrop,this),this.frame.on("cropped",this.onCropped,this),this.frame.on("skippedcrop",this.onSkippedCrop,this)},onSelect:function(){var e=this.frame.state().get("selection").first().toJSON(),t=this.thisButton?this.thisButton.closest(".repeater-field"):null;t&&t.classList.contains("repeater-field-upload")?this.setFileInRepeaterField(e):this.setImageInRepeaterField(e)},onSelectForCrop:function(){var e=this.frame.state().get("selection").first().toJSON();this.params.width!==e.width||this.params.height!==e.height||this.params.flex_width||this.params.flex_height?this.frame.setState("cropper"):this.setImageInRepeaterField(e)},onCropped:function(e){this.setImageInRepeaterField(e)},calculateImageSelectOptions:function(e,t){var i,r,n,a=t.get("control"),s=!!parseInt(a.params.flex_width,10),o=!!parseInt(a.params.flex_height,10),l=e.get("width"),d=e.get("height"),c=parseInt(a.params.width,10),u=parseInt(a.params.height,10),p=c/u;return t.set("canSkipCrop",!a.mustBeCropped(s,o,c,u,l,d)),l/d>p?c=(u=d)*p:u=(c=l)/p,i=(l-c)/2,r=(d-u)/2,n={handles:!0,keys:!0,instance:!0,persistent:!0,imageWidth:l,imageHeight:d,x1:i,y1:r,x2:c+i,y2:u+r},!1===o&&!1===s&&(n.aspectRatio=c+":"+u),!1===o&&(n.maxHeight=u),!1===s&&(n.maxWidth=c),n},mustBeCropped:function(e,t,i,r,n,a){return!(!0===e&&!0===t||!0===e&&r===a||!0===t&&i===n||i===n&&r===a||n<=i)},onSkippedCrop:function(){var e=this.frame.state().get("selection").first().toJSON();this.setImageInRepeaterField(e)},setImageInRepeaterField:function(e){var n=this.thisButton?this.thisButton.closest(".repeater-field-image, .repeater-field-cropped_image"):null;if(n){var a=t(n,".kirki-image-attachment");a&&(a.innerHTML='<img src="'+e.url+'">',a.style.display="none",o(a,400));var s=t(n,".hidden-field");s&&(s.value=e.id);var l=r(this.thisButton,"alt-label");l&&this.thisButton&&(this.thisButton.textContent=l);var d=t(n,".remove-button");d&&(d.style.display=""),i(n,"input, textarea, select").forEach(function(e){e.dispatchEvent(new Event("change",{bubbles:!0}))}),this.frame.close()}},setFileInRepeaterField:function(e){var n=this.thisButton?this.thisButton.closest(".repeater-field-upload"):null;if(n){var a=t(n,".kirki-file-attachment");a&&(a.innerHTML='<span class="file"><span class="dashicons dashicons-media-default"></span> '+e.filename+"</span>",a.style.display="none",o(a,400));var s=t(n,".hidden-field");s&&(s.value=e.id);var l=r(this.thisButton,"alt-label");l&&this.thisButton&&(this.thisButton.textContent=l);var d=t(n,".upload-button");d&&(d.style.display="");var c=t(n,".remove-button");c&&(c.style.display=""),i(n,"input, textarea, select").forEach(function(e){e.dispatchEvent(new Event("change",{bubbles:!0}))}),this.frame.close()}},getMimeType:function(){var e=this.thisButton?this.thisButton.parentElement.querySelector("input.hidden-field"):null,t=e?r(e,"field"):null;return _.isString(t)&&""!==t&&_.isObject(this.params.fields[t])&&"upload"===this.params.fields[t].type&&!_.isUndefined(this.params.fields[t].mime_type)?this.params.fields[t].mime_type:"image"},removeImage:function(e){if(!wp.customize.utils.isKeydownButNotEnterEvent(e)){var n=this.thisButton?this.thisButton.closest(".repeater-field-image, .repeater-field-cropped_image, .repeater-field-upload"):null;if(n){var a=t(n,".upload-button"),o=t(n,".kirki-image-attachment"),l=o?r(o,"placeholder"):"";o&&s(o,200,function(){this.style.display="",this.innerHTML=l||""});var d=t(n,".hidden-field");d&&(d.value="");var c=a?r(a,"label"):"";c&&a&&(a.textContent=c),this.thisButton&&(this.thisButton.style.display="none"),i(n,"input, textarea, select").forEach(function(e){e.dispatchEvent(new Event("change",{bubbles:!0}))})}}},removeFile:function(e){if(!wp.customize.utils.isKeydownButNotEnterEvent(e)){var n=this.thisButton?this.thisButton.closest(".repeater-field-upload"):null;if(n){var a=t(n,".upload-button"),o=t(n,".kirki-file-attachment"),l=o?r(o,"placeholder"):"";o&&s(o,200,function(){this.style.display="",this.innerHTML=l||""});var d=t(n,".hidden-field");d&&(d.value="");var c=a?r(a,"label"):"";c&&a&&(a.textContent=c),this.thisButton&&(this.thisButton.style.display="none"),i(n,"input, textarea, select").forEach(function(e){e.dispatchEvent(new Event("change",{bubbles:!0}))})}}},getValue:function(){return JSON.parse(decodeURI(this.setting.get()))},setValue:function(e,t,i){var r=[];i&&(Object.keys(this.params.fields).forEach((function(e){var t=this.params.fields[e];("image"===t.type||"cropped_image"===t.type||"upload"===t.type)&&r.push(e)}).bind(this)),e.forEach(function(t,i){r.forEach(function(r){_.isUndefined(t[r])||_.isUndefined(t[r].id)||(e[i][r]=t[r].id)})})),this.setting.set(encodeURI(JSON.stringify(e))),t&&("undefined"!=typeof KirkiRepeaterDependencies&&KirkiRepeaterDependencies&&"function"==typeof KirkiRepeaterDependencies.init&&KirkiRepeaterDependencies.init(),this.settingField&&this.settingField.dispatchEvent(new Event("change",{bubbles:!0})))},addRow:function(e){var t,i,a,s=this,o=s.repeaterTemplate(),d=this.getValue(),c={};if(o){if(Array.isArray(d)||(d=[]),this.currentIndex!==d.length&&(this.currentIndex=d.length),t=JSON.parse(JSON.stringify(s.params.fields)),e)for(a in e)e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&(t[a].default=e[a]);t.index=this.currentIndex;var u=o(t);if(!u||"string"!=typeof u)return void console.warn("Repeater template returned invalid HTML");var p=document.createElement("div");p.innerHTML=u.trim();var h=p.firstElementChild||p.firstChild;if(h&&1===h.nodeType||(h=p.querySelector("li.repeater-row")),!h)return void console.warn("Repeater template did not produce a valid row element");if(s.repeaterFieldsContainer){if(s.repeaterFieldsContainer.appendChild(h),i=new l(s.currentIndex,h,s.params.row_label,s),r(h,"row")!==String(s.currentIndex)&&n(h,"row",s.currentIndex),i.containerEl&&i.containerEl.classList.contains("minimized")&&(i.containerEl.classList.remove("minimized"),i.header)){var f=i.header.querySelector(".dashicons");f&&(f.classList.remove("dashicons-arrow-down"),f.classList.add("dashicons-arrow-up"))}i.updateLabel(),i.containerEl&&(i._removeHandler=function(e){var t=e.detail&&void 0!==e.detail[0]?e.detail[0]:i.rowIndex;s.deleteRow(t)},i._updateHandler=function(e){var t=e.detail||[];t[0];var r=t[1],n=t[2];s.updateField.call(s,e,i.rowIndex,r,n),i.updateLabel()},i.containerEl.addEventListener("row:remove",i._removeHandler),i.containerEl.addEventListener("row:update",i._updateHandler))}for(a in this.rows[this.currentIndex]=i,t)t.hasOwnProperty(a)&&"index"!==a&&(c[a]=t[a].default);return Array.isArray(d)||(d=[]),this.currentIndex!==d.length&&(this.currentIndex=d.length),d[this.currentIndex]=c,this.setValue(d,!0),this.currentIndex++,i}},sort:function(){var e=this,t=this.repeaterFieldsContainer;if(t){var a=i(t,".repeater-row"),s=e.getValue(),o=[],l=[],d=[];a.forEach(function(t){var i=-1,n=r(t,"row");if(null!=n&&""!==n){var a=parseInt(n,10);!isNaN(a)&&e.rows[a]&&e.rows[a].containerEl===t&&(i=a)}if(-1===i){for(var s=0;s<e.rows.length;s++)if(e.rows[s]&&e.rows[s].containerEl===t){i=s;break}}i>=0&&o.push(i)}),o.length===a.length&&(o.forEach(function(t,i){l[i]=e.rows[t],l[i]&&(l[i].setRowIndex(i),l[i].containerEl&&n(l[i].containerEl,"row",i),l[i].updateLabel()),d[i]=void 0!==s[t]?s[t]:{}}),e.rows=l,e.setValue(d,!0),e.currentIndex=d.length)}},deleteRow:function(e){var t=this.getValue(),a=[],s=[],o=0;if(void 0!==t[e]){if(this.rows[e]){for(var l=0;l<t.length;l++)l!==e&&(a[o]=t[l],s[o]=this.rows[l],s[o]&&(s[o].setRowIndex(o),s[o].containerEl&&(n(s[o].containerEl,"row",o),s[o].updateLabel())),o++);this.rows=s,this.setValue(a,!0),this.currentIndex=a.length;for(var d=0;d<s.length;d++)s[d]&&s[d].updateLabel()}}else{var c=i(this.repeaterFieldsContainer,".repeater-row"),u=[],p=[];c.forEach((function(e,i){var a=parseInt(r(e,"row"),10);!isNaN(a)&&this.rows[a]&&(u[i]=this.rows[a],u[i].setRowIndex(i),n(e,"row",i),p[i]=t[a]||{})}).bind(this)),this.rows=u,this.currentIndex=u.length;for(var h=0;h<u.length;h++)u[h]&&u[h].updateLabel();p.length>0&&this.setValue(p,!0)}},updateField:function(t,i,r,n){if(null==i||isNaN(i))return void console.warn("updateField: Invalid rowIndex",i);if(i=parseInt(i,10),!this.rows[i])return void console.warn("updateField: Row not found at index",i);if(!this.params.fields[r])return void console.warn("updateField: Field not found",r);a=this.params.fields[r].type,this.rows[i],Array.isArray(s=this.getValue())||(s=[]);var a,s,o=e(n);o||(o="string"==typeof n?document.querySelector(n):n),s[i]||(s[i]={}),_.isUndefined(s[i][r])&&(s[i][r]=""),"checkbox"===a?s[i][r]=o.checked:s[i][r]=o.value,this.setValue(s,!0)},initColorPicker:function(){var e=this;i(e.container,".kirki-classic-color-picker").forEach(function(t){if(!t.closest(".wp-picker-container")){var i=jQuery(t),n=r(t,"field"),a={};!_.isUndefined(n)&&!_.isUndefined(e.params.fields[n])&&!_.isUndefined(e.params.fields[n].palettes)&&_.isObject(e.params.fields[n].palettes)&&(a.palettes=e.params.fields[n].palettes),a.change=function(t,i){var n=t.target,a=n.closest(".repeater-row"),s=a?parseInt(r(a,"row"),10):null,o=e.getValue(),l=i.color._alpha<1?i.color.to_s():i.color.toString();if(null!==s&&!_.isUndefined(o[s])){var d=r(n,"field");o[s][d]=l,e.setValue(o,!0)}setTimeout(function(){t.target.value=l},50)},i.wpColorPicker(a)}})},initSelect:function(e,i){var n,a=this,s=t(e.container,".repeater-field select");s&&(n=r(s,"field"),r(s,"multiple"),(i=i||{})[n]=i[n]||"",s.value=i[n]||s.value,s.addEventListener("change",function(e){var t=e.target,i=t.closest(".repeater-row"),n=i?parseInt(r(i,"row"),10):null,s=a.getValue();if(null!==n&&!_.isUndefined(s[n])){var o=r(t,"field");s[n][o]=t.value,a.setValue(s)}}))}})}();